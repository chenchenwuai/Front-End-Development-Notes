### TCP为什么需要三次握手
3次握手”的作用就是双方都能明确自己和对方的收、发能力是正常的。
第一次握手：客户端发送网络包，服务端收到了。这样服务端就能得出结论：客户端的发送能力、服务端的接收能力是正常的

第二次握手：服务端发包，客户端收到了。这样客户端就能得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。

第三次握手：客户端发包，服务端收到了。这样服务端就能得出结论：客户端的接收、发送能力，服务端的发送、接收能力是正常的

因此，最少需要三次，双方才能得出自己、对方的接收、发送能力都是正常的结论


### 三次握手
- 第一次握手：客户端尝试连接服务器，向服务器发送 syn 包（同步序列编号Synchronize Sequence Numbers），syn=j，客户端进入 SYN_SEND 状态等待服务器确认
- 第二次握手：服务器接收客户端syn包并确认（ack=j+1），同时向客户端发送一个 SYN包（syn=k），即 SYN+ACK 包，此时服务器进入 SYN_RECV 状态
- 第三次握手：第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手


### 使用多个TCP连接
在 HTTP/1.x 中没有多路复用的情况下，浏览器可以单纯地将客户端上的所有 HTTP 请求排队，通过单个持久连接一个接一个地发送。在实践中，这种方式太慢了，因此可以选择
并行打开多个TCP连接。**大多数浏览器，每个主机最多打开6个TCP连接**

#### 使用多个TCP连接带来的成本
- 额外的内存缓冲区和 CPU 开销。CPU 和内存成本非常高
- 并行 TCP 流之间共享带宽的竞争
- 处理套接字集合的实现复杂度更高

### TCP和UDP的比较
- 可靠性。TCP是可靠的，UDP是不可靠的
- 交付。TCP是顺序交付的，如果有丢包则会一直阻塞。UDP是无序的，容忍丢包。
- 传输。TCP是面向字节的，UDP是面向消息的。
- 流量控制。TCP会流量控制，UDP不具备
- 拥塞控制。TCP具备拥塞控制，UDP不具备。
